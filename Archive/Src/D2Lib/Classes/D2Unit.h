//////////////////////////////////////////////////////////////////////
// D2Unit.h: interface of the CD2Unit class.
//
// This class is used for manipulating motion objects in the Diablo II
// game. It is derived from the CD2Object class and extended CD2Object
// so that it can be used for motion objects such as NPC and monsters.
//
// Written by Abin (abinn32@yahoo.com)
// http://www.wxjindu.com/abin/
//
// July 14th, 2004
//////////////////////////////////////////////////////////////////////

#ifndef __D2UNIT_H__
#define __D2UNIT_H__

#include "D2Object.h"

///////////////////////////////////////////////////////////////////////
// CD2Unit Class Definition
///////////////////////////////////////////////////////////////////////
class CD2Unit : public CD2Object
{
public:

	///////////////////////////////////////////////////////////////////////
	// Constructor(s) & destructor
	///////////////////////////////////////////////////////////////////////
	CD2Unit();
	virtual ~CD2Unit();

	///////////////////////////////////////////////////////////////////////
	// Client Entries
	///////////////////////////////////////////////////////////////////////
	virtual void OnGameJoin(const THISGAMESTRUCT* pGame);
	virtual void OnGameLeave();
	virtual void OnGamePacketBeforeReceived(const BYTE* aPacket, DWORD aLen);

	///////////////////////////////////////////////////////////////////////
	// Public Attributes
	///////////////////////////////////////////////////////////////////////
	BOOL IsMoving() const;

	///////////////////////////////////////////////////////////////////////
	// Public Operations
	///////////////////////////////////////////////////////////////////////
	virtual void InitAttributes(); // Clean all attributes

protected:

	///////////////////////////////////////////////////////////////////////
	// Overrides
	///////////////////////////////////////////////////////////////////////
	virtual void OnStartMove(WORD wFromX, WORD wFromY, WORD wToX, WORD wToY); // Unit started to move
	virtual void OnEndMove(WORD wFromX, WORD wFromY, WORD wToX, WORD wToY); // Unit ended moving

	///////////////////////////////////////////////////////////////////////
	// Protected Operations
	///////////////////////////////////////////////////////////////////////

	///////////////////////////////////////////////////////////////////////
	// Protected Member Data
	///////////////////////////////////////////////////////////////////////
	BOOL m_bIsMoving; // Is the unit moving?
};

#endif // __D2UNIT_H__